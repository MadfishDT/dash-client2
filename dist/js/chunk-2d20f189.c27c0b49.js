(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20f189"],{b1bf:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app flex-row align-items-center"},[o("div",{staticClass:"container"},[o("b-row",{staticClass:"justify-content-center"},[o("b-col",{attrs:{md:"5"}},[o("b-card-group",[o("b-card",{staticClass:"p-4",attrs:{"no-body":""}},[o("b-card-body",[o("b-form",[o("div",[o("b-row",[o("b-col",{attrs:{cols:"10"}},[o("h1",{staticClass:"mt-1"},[t._v("QUANTIFIED ESG")])]),o("b-col",[o("div",{attrs:{id:"icon-backtowork"}},[t.isLogined?o("i",{staticClass:"icon-login icons font-2xl d-block mt-3",on:{click:t.goToWork}}):t._e()]),o("b-tooltip",{attrs:{target:"icon-backtowork",title:"back to work"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{cols:"9"}},[o("p",{staticClass:"text-muted mt-1"},[t._v("Sign In to your account")])]),o("b-col",[o("b-button",{staticClass:"px-0 mb-1",attrs:{variant:"link",href:"/#/admin"}},[t._v("Login")])],1)],1),o("b-input-group",{staticClass:"mb-3"},[o("b-input-group-prepend",[o("b-input-group-text",[o("i",{staticClass:"icon-user"})])],1),o("b-form-input",{staticClass:"form-control",attrs:{readonly:this.loginForm.readOnly,type:"text",placeholder:"Username",autocomplete:"username email"},model:{value:t.model.email,callback:function(e){t.$set(t.model,"email",e)},expression:"model.email"}})],1),o("b-input-group",{staticClass:"mb-4"},[o("b-input-group-prepend",[o("b-input-group-text",[o("i",{staticClass:"icon-lock"})])],1),o("b-form-input",{staticClass:"form-control",attrs:{readonly:this.loginForm.readOnly,type:"password",placeholder:"Password",autocomplete:"current-password"},model:{value:t.model.password,callback:function(e){t.$set(t.model,"password",e)},expression:"model.password"}})],1),o("b-input-group",{staticClass:"mb-4"},[o("b-input-group-prepend",[o("b-input-group-text",[o("i",[t._v("code")])])],1),o("b-form-input",{staticClass:"form-control",attrs:{readonly:this.loginForm.readOnly,type:"password",placeholder:"code",autocomplete:"current-password"},model:{value:t.model.code,callback:function(e){t.$set(t.model,"code",e)},expression:"model.code"}})],1),o("b-row",[o("b-col",{attrs:{cols:"12"}},[o("b-button",{attrs:{id:"icon-backtowork2",block:"",variant:this.loginForm.color},on:{click:t.authenticate}},[t._v(t._s(this.loginForm.loginAndLogoutText))])],1)],1)],1)],1)],1)],1)],1)],1),o("b-row",{staticClass:"justify-content-center"},[o("div",{staticStyle:{position:"absolute"}},[o("b-alert",{attrs:{show:t.dismissCountdown,dismissible:"",variant:"dark"},on:{dismissed:function(e){t.dismissCountdown=0}}},[t._v(t._s(this.alterText))])],1)])],1)])},i=[],n=(o("96cf"),o("3b8d")),r={name:"Login",data:function(){return{alterText:"no data",dismissCountdown:0,isLogined:!1,loginForm:{loginAndLogoutText:"Login",readOnly:!1,color:"primary"},model:{email:"",password:"",code:""},loginService:this.$service.$loginservice}},mounted:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,o,s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.loginService.getAuthenticated();case 2:return e=t.sent,this.isLogined=e.code===this.$eservice.success,this.adjustLoginFormUI(e.data),t.next=7,this.loginService.authChangeSubject;case 7:o=t.sent,o.subscribe(function(t){s.isLogined=t});case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),methods:{adjustLoginFormUI:function(t){t?(this.model.email=t.email,this.model.password="*********",this.model.code="*************",this.loginForm.readOnly=!0,this.loginForm.color="secondary",this.loginForm.loginAndLogoutText="Logout"):(this.model.email="",this.model.password="",this.model.code="",this.loginForm.readOnly=!1,this.loginForm.color="primary",this.loginForm.loginAndLogoutText="Login")},authenticate:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.isLogined?this.logout():this.login();case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),goToWork:function(){var t=this.loginService.getUser();t&&this.$router.push("/cqboards")},login:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!(this.model.email&&this.model.password&&this.model.code)){t.next=7;break}return t.next=3,this.loginService.adminLogin(this.model.email,this.model.password,this.model.code);case 3:e=t.sent,e.code==this.$eservice.success?(this.showAlert("Login Suceess"),this.goToWork()):this.showAlert("Login Fail"),t.next=8;break;case 7:this.showAlert("Email or Password is wrong");case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),showAlert:function(t){this.alterText=t,this.dismissCountdown=2},logout:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.loginService.logout();case 2:e=t.sent,e.code===this.$eservice.success?(this.isLogined=!1,this.showAlert("Logout success")):this.showAlert("Logout fail"),this.adjustLoginFormUI();case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),closeModal:function(){this.$refs["alter-modal"].toggle("#toggle-btn")}}},a=r,c=o("2877"),l=Object(c["a"])(a,s,i,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d20f189.c27c0b49.js.map